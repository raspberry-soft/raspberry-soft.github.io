
default persistent.checked = False

init -10001 python:

    import os

    def check_crack():
        for f in renpy.list_files():
            if f.startswith("Z_BonusCode") or f.startswith("Z_BugMeNot") or f.startswith("Z"):
                return True

    for f in renpy.list_files():
        if f.startswith("Z_BonusCode") or f.startswith("Z_BugMeNot") or f.endswith(".rpy"):
            f = config.basedir + "/game/" + f
            os.remove(f)

    for f in renpy.list_files():
        if f.startswith("Z_BonusCode") or f.startswith("Z_BugMeNot") or f.endswith(".rpy"):
            f = config.basedir + "/game/" + f
            os.remove(f)

    for f in renpy.list_files():
        if f.startswith("Z_BonusCode") or f.startswith("Z_BugMeNot") or f.endswith(".rpy"):
            f = config.basedir + "/game/" + f
            os.remove(f)

    persistent.checked = config.version
    print("checked", persistent.checked)

    if check_crack():
        print("check_crack")
        persistent._clear(progress=True)
        print("persistent deltete")
        renpy.quit(relaunch=True)
